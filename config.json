{
    "name": "Wild Duck MTA",

    "ident": "wildduck-mta",

    "#": "If started as root user then downgrade workers to this user",
    "#user": "zone-mta",
    "#group": "zone-mta",

    "log": {
        "syslog": false,
        "level": "info",
        "remote": false
    },

    "queue": {
        "#": "This is the config for MongoDB where to save the queued messages",
        "mongodb": "mongodb://127.0.0.1:27017/zone-mta",
        "gfs": "mail",
        "collection": "zone-queue",
        "disableGC": false
    },
    "dns": {
        "caching": true,
        "blockDomains": ["localhost", "localhost.localdomain"],
        "blockLocalAddresses": true
    },
    "api": {
        "#": "Exposes local API",
        "port": 6080,
        "host": "127.0.0.1"
    },
    "smtpInterfaces": {
        "feeder": {
            "name": "Wild Duck MSA",
            "disableVersionString": true,
            "enabled": true,
            "authentication": true,
            "port": 587,
            "host": "0.0.0.0",
            "processes": 1,
            "maxSize": 52428800,

            "starttls": true,
            "key": "./certs/example.key",
            "cert": "./certs/example.cert"
        }
    },
    "pluginsPath": "./plugins",
    "plugins": {
        "core/default-headers": {
            "enabled": ["receiver", "main", "sender"],
            "addMissing": ["message-id", "date"],
            "futureDate": false,
            "xOriginatingIP": true,
            "allowRountingHeaders": ["api", "bounce"]
        },
        "core/email-bounce": {
            "enabled": "main",
            "mailerDaemon": {
                "name": "Mail Delivery Subsystem",
                "address": "mailer-daemon@example.com"
            },
            "sendingZone": "bounces"
        },
        "modules/zonemta-loop-breaker": {
            "enabled": "sender",
            "secret": "N8LEqqDBpAi5yZ97ORKTP",
            "algo": "md5",
            "header": "X-Loop-Break"
        },
        "core/image-hashes": {
            "enabled": "receiver"
        },
        "modules/zonemta-wildduck": {
            "enabled": ["receiver", "sender"],

            "hostname": "example.com",
            "secret": "N8LEqqDBpAi5yZ97ORKTP",

            "mongo": "mongodb://127.0.0.1:27017/wildduck",
            "redis": "redis://127.0.0.1:6379",
            "users": "wildduck",
            "gridfs": "wildduck",

            "#": "The following address is used when delivering locally",
            "zoneAddress": {
                "address": "0.0.0.0",
                "name": "example.com"
            },

            "#": "Local messages are delivered using the following settings",
            "#": "In this case the Wild Duck LMTP should be found from 127.0.01:5024",
            "mxPort": 5024,
            "mx": [
                {
                    "priority": 0,
                    "exchange": "example.com",
                    "A": ["127.0.0.1"],
                    "AAAA": []
                }
            ]
        },

        "dkim": {
            "enabled": "sender",
            "domain": "example.com",
            "selector": "jul2017",
            "path": "./certs/dkim.key"
        },

        "modules/zonemta-delivery-counters": {
            "enabled": "main",
            "redis": "redis://127.0.0.1:6379",
            "prefix": "wz"
        }
    },

    "pools": {
        "default": [
            {
                "#": "IP address to bind to when delivering mail",
                "address": "0.0.0.0",
                "name": "example.com"
            }
        ]
    },

    "zones": {
        "default": {
            "preferIPv6": false,
            "ignoreIPv6": true,
            "processes": 1,
            "connections": 5,
            "throttling": false,
            "logger": false,
            "logLevel": "info",
            "pool": "default"
        },

        "bounces": {
            "preferIPv6": false,
            "ignoreIPv6": true,
            "processes": 1,
            "connections": 5,
            "logger": false,
            "logLevel": "info",
            "blockDomains": ["localhost", "localhost.localdomain"],
            "pool": "default"
        }
    },

    "domainConfig": {
        "default": {
            "maxConnections": 4
        }
    },
    "blacklist": {
        "ttl": 3600000
    }
}
